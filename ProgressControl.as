package  {	import flash.events.Event;	import flash.display.MovieClip;	import flash.display.Sprite;		public class ProgressControl extends Control {				public const WIDTH = 100;		public const HEIGHT = 5;		public function ProgressControl(preferredWidth:int, preferredHeight:int, preferredColor:uint, audio:AudioPlayer) {			super(preferredWidth, preferredHeight, preferredColor, audio);			this.addEventListener(Event.ENTER_FRAME, this.onFrame);			this.x += 10;		}				private function onFrame(e:Event, x:int = 10, y:int = 15, width=this.WIDTH, height=this.HEIGHT, self:Object = null) {			if(self == null) self = this;			self.graphics.clear()						self.graphics.beginFill(0xFFFFFF);			self.graphics.drawRect(x, y, width, height);						self.graphics.endFill();						if(this.getAudioPlayer() != null) {				self.graphics.beginFill(0xFF9238);				self.graphics.drawRect(x, y, this.getAudioPlayer().getLoaded()/100*width, height);				self.graphics.endFill();								self.graphics.beginFill(0xFF0000);				self.graphics.drawRect(x, y, this.getAudioPlayer().getPlayed()*width, height);				self.graphics.endFill();			}		}				public override function getControlElement():MovieClip {			var s:MovieClip = new ControlElement();			s.graphics.beginFill(0xFFFFFF);			s.graphics.drawRect(0, 0, 220, 36);						var W:int = 200;						var sl:Slider = new Slider(200, 20, 0, 1000);			sl.x = 14;			s.addChild(sl);						var l:Sprite = new Sprite();			var self:ProgressControl = this;			l.addEventListener(Event.ENTER_FRAME, function(e:Event) {				self.onFrame(e, 15, 19, W, 5, l);				if(!sl.beeingDragged) sl.setValue(self.getAudioPlayer().getPlayed()*1000, true);			});						sl.addChangeListener(function() {				self.getAudioPlayer().setPlayed(sl.getValue()/10);			}); 						s.addChild(l);						return s;		}	}	}